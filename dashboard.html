<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SpotAlert Test Dashboard</title>
<style>
body{font-family:Poppins,Arial,sans-serif;background:#f2f7ff;margin:0;padding:0;text-align:center}
h1{color:#0078ff;margin-top:40px}
form{margin:40px auto;background:#fff;padding:30px;border-radius:12px;max-width:500px;
      box-shadow:0 4px 15px rgba(0,0,0,.1)}
input[type=file]{margin:10px 0}
button{background:#0078ff;color:#fff;border:none;padding:10px 20px;border-radius:6px;
       cursor:pointer;font-weight:600}
button:hover{background:#005fcc}
#result{margin-top:30px}
img.preview{max-width:80%;border-radius:10px;margin-top:10px;box-shadow:0 0 12px rgba(0,120,255,.25)}
pre{background:#f5f5f5;text-align:left;padding:15px;border-radius:8px;overflow:auto}
</style>
</head>
<body>
<h1>üß† SpotAlert Rekognition Test</h1>
<form id="uploadForm">
  <input type="file" id="imageInput" accept="image/*" required><br>
  <input type="email" id="emailInput" placeholder="your@email.com" required><br><br>
  <button type="submit">Upload &amp; Analyze</button>
</form>

<div id="result"></div>

<script>
const form=document.getElementById('uploadForm');
form.addEventListener('submit',async e=>{
  e.preventDefault();
  const file=document.getElementById('imageInput').files[0];
  const email=document.getElementById('emailInput').value;
  if(!file)return;
  const formData=new FormData();
  formData.append('image',file);
  formData.append('email',email);
  document.getElementById('result').innerHTML='<p>‚è≥ Uploading and analyzing...</p>';

  const res=await fetch('/trigger-alert',{method:'POST',body:formData});
  const data=await res.json();
  document.getElementById('result').innerHTML=
    `<h3>Result:</h3>
     <img src="${URL.createObjectURL(file)}" class="preview">
     <pre>${JSON.stringify(data,null,2)}</pre>`;
});
</script>
</body>
</html>
